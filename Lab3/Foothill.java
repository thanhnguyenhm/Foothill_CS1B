/*Source code for Lab Assignment 3 - Cellular Automata
 Modified by Thanh Nguyen 01/25/16*/

/*import java.util.Scanner;

public class Foothill
{
   public static void main(String[] args)
   {
      int rule, k;
      String strUserIn;
      
      Scanner inputStream = new Scanner(System.in);
      Automaton aut;

      // get rule from user
      do
      {
         System.out.print("Enter Rule (0 - 255): ");
         // get the answer in the form of a string:
         strUserIn = inputStream.nextLine();
         // and convert it to a number so we can compute:
         rule = Integer.parseInt(strUserIn);
      } while (rule < 0 || rule > 255);   
         
      // create automaton with this rule and single central dot
      aut = new Automaton(rule);

      // now show it
      System.out.println("   start");
      for (k = 0; k < 100; k++)
      {
         System.out.println( aut.toStringCurrentGen() );
         aut.propagateNewGeneration();
      }
      System.out.println("   end");
      inputStream.close();   
   }
}

class Automaton
{
   // class constants
   public final static int MAX_DISPLAY_WIDTH = 121;
   
   // private members
   private boolean rules[];  // allocate rules[8] in constructor!
   private String thisGen;   // same here
   private String extremeBit; // bit, "*" or " ", implied everywhere "outside"
   private int displayWidth;  // an odd number so it can be perfectly centered
   
   // public constructors, mutators, etc. (need to be written)
   public Automaton(int new_rule)
   {      
      setDisplayWidth(79);
      resetFirstGen();
      setRule(new_rule);
   }
   
   public void resetFirstGen()
   {
      thisGen = "*";
      extremeBit = " ";      
   }
   
   public boolean setRule(int new_rule)
   {
      if(new_rule < 0 || new_rule > 255)
         return false;
      
      rules = new boolean[8];  
      for(int i = 0; i < 8; i++)
      {
         rules[i] = (new_rule % 2 != 0);
         new_rule /= 2;         
      }  

      return true;
   }
   
   public boolean setDisplayWidth(int width)
   {
      if(width > MAX_DISPLAY_WIDTH || (width % 2 == 0) || width < 0)
         return false;
      displayWidth = width;
      return true;
   }
   
   
   public StringBuffer toStringCurrentGen()
   {
      StringBuffer returnString = new StringBuffer();
      //set thisGen positions
      int thisGenFirstPos = (displayWidth / 2) - (thisGen.length() / 2);
      int thisGenLastPos = thisGenFirstPos + thisGen.length();
          
      if(thisGen.length() < displayWidth)
      {
         //fill extremeBit
         for(int k = 0; k < thisGenFirstPos; k++)   
            returnString.append(extremeBit);
         
         //insert thisGen in the center
         returnString.insert(thisGenFirstPos, thisGen);
         
         //fill extremeBit
         for(int k = thisGenLastPos; k < displayWidth; k++)   
            returnString.append(extremeBit);
      }
      else if(thisGen.length() > displayWidth)
      {
         String truncatedGen;
         truncatedGen = thisGen.substring((thisGen.length() - displayWidth) / 2
                     , (thisGen.length() + displayWidth) / 2);
         returnString = new StringBuffer(truncatedGen);                                      
      }
      else
         returnString = new StringBuffer(thisGen);
      
      return returnString;
   }
   
   
   public void propagateNewGeneration()
   {  
      String nextGen = "";
      thisGen = extremeBit + extremeBit + thisGen + extremeBit + extremeBit;
      
      for(int i = 1; i < thisGen.length() - 1; i++)
      {
         String num = "";
         for(int j = -1; j < 2; j ++)
         {          
            if(thisGen.charAt(j + i) == '*')
               num += 1;
            else
               num += 0;
         }
         int k = Integer.parseInt(num, 2);         
         if(rules[k])
            nextGen += "*";
         else
            nextGen += " ";         
      }

      if(rules[0])
         extremeBit = "*";
      
      thisGen = nextGen;
   }  
}*/


/***************SAMPLE RUN*****************
Enter Rule (0 - 255): 4
start
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
                                    *                                       
end

Enter Rule (0 - 255): 126

   start
                                       *                                       
                                      ***                                      
                                     ** **                                     
                                    *******                                    
                                   **     **                                   
                                  ****   ****                                  
                                 **  ** **  **                                 
                                ***************                                
                               **             **                               
                              ****           ****                              
                             **  **         **  **                             
                            ********       ********                            
                           **      **     **      **                           
                          ****    ****   ****    ****                          
                         **  **  **  ** **  **  **  **                         
                        *******************************                        
                       **                             **                       
                      ****                           ****                      
                     **  **                         **  **                     
                    ********                       ********                    
                   **      **                     **      **                   
                  ****    ****                   ****    ****                  
                 **  **  **  **                 **  **  **  **                 
                ****************               ****************                
               **              **             **              **               
              ****            ****           ****            ****              
             **  **          **  **         **  **          **  **             
            ********        ********       ********        ********            
           **      **      **      **     **      **      **      **           
          ****    ****    ****    ****   ****    ****    ****    ****          
         **  **  **  **  **  **  **  ** **  **  **  **  **  **  **  **         
        ***************************************************************        
       **                                                             **       
      ****                                                           ****      
     **  **                                                         **  **     
    ********                                                       ********    
   **      **                                                     **      **   
  ****    ****                                                   ****    ****  
 **  **  **  **                                                 **  **  **  ** 
****************                                               ****************
*              **                                             **              *
**            ****                                           ****            **
 **          **  **                                         **  **          ** 
****        ********                                       ********        ****
   **      **      **                                     **      **      **   
  ****    ****    ****                                   ****    ****    ****  
 **  **  **  **  **  **                                 **  **  **  **  **  ** 
************************                               ************************
                       **                             **                       
                      ****                           ****                      
                     **  **                         **  **                     
                    ********                       ********                    
                   **      **                     **      **                   
                  ****    ****                   ****    ****                  
                 **  **  **  **                 **  **  **  **                 
                ****************               ****************                
*              **              **             **              **              *
**            ****            ****           ****            ****            **
 **          **  **          **  **         **  **          **  **          ** 
****        ********        ********       ********        ********        ****
   **      **      **      **      **     **      **      **      **      **   
  ****    ****    ****    ****    ****   ****    ****    ****    ****    ****  
 **  **  **  **  **  **  **  **  **  ** **  **  **  **  **  **  **  **  **  ** 
*******************************************************************************
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
*                                                                             *
**                                                                           **
 **                                                                         ** 
****                                                                       ****
   **                                                                     **   
  ****                                                                   ****  
 **  **                                                                 **  ** 
********                                                               ********
       **                                                             **       
      ****                                                           ****      
     **  **                                                         **  **     
    ********                                                       ********    
   end




Enter Rule (0 - 255): 130
   start
                                       *                                       
                                      *                                        
                                     *                                         
                                    *                                          
                                   *                                           
                                  *                                            
                                 *                                             
                                *                                              
                               *                                               
                              *                                                
                             *                                                 
                            *                                                  
                           *                                                   
                          *                                                    
                         *                                                     
                        *                                                      
                       *                                                       
                      *                                                        
                     *                                                         
                    *                                                          
                   *                                                           
                  *                                                            
                 *                                                             
                *                                                              
               *                                                               
              *                                                                
             *                                                                 
            *                                                                  
           *                                                                   
          *                                                                    
         *                                                                     
        *                                                                      
       *                                                                       
      *                                                                        
     *                                                                         
    *                                                                          
   *                                                                           
  *                                                                            
 *                                                                             
*                                                                              
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
   end



Enter Rule (0 - 255): 83
   start
                                       *                                       
*************************************** ***************************************
************************************* *   *************************************
*************************************  *** ************************************
*********************************** ***  *  ***********************************
***********************************   *** ** **********************************
********************************* ****  *  *  *********************************
*********************************    *** ** ** ********************************
******************************* *****  *  *  *  *******************************
*******************************     *** ** ** ** ******************************
***************************** ******  *  *  *  *  *****************************
*****************************      *** ** ** ** ** ****************************
*************************** *******  *  *  *  *  *  ***************************
***************************       *** ** ** ** ** ** **************************
************************* ********  *  *  *  *  *  *  *************************
*************************        *** ** ** ** ** ** ** ************************
*********************** *********  *  *  *  *  *  *  *  ***********************
***********************         *** ** ** ** ** ** ** ** **********************
********************* **********  *  *  *  *  *  *  *  *  *********************
*********************          *** ** ** ** ** ** ** ** ** ********************
******************* ***********  *  *  *  *  *  *  *  *  *  *******************
*******************           *** ** ** ** ** ** ** ** ** ** ******************
***************** ************  *  *  *  *  *  *  *  *  *  *  *****************
*****************            *** ** ** ** ** ** ** ** ** ** ** ****************
*************** *************  *  *  *  *  *  *  *  *  *  *  *  ***************
***************             *** ** ** ** ** ** ** ** ** ** ** ** **************
************* **************  *  *  *  *  *  *  *  *  *  *  *  *  *************
*************              *** ** ** ** ** ** ** ** ** ** ** ** ** ************
*********** ***************  *  *  *  *  *  *  *  *  *  *  *  *  *  ***********
***********               *** ** ** ** ** ** ** ** ** ** ** ** ** ** **********
********* ****************  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *********
*********                *** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ********
******* *****************  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *******
*******                 *** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ******
***** ******************  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *****
*****                  *** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ****
*** *******************  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  ***
***                   *** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** **
* ********************  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *
*                    *** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** 
*********************  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  * 
                    *** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** *
********************  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  
                   *** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** **
*******************  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *
                  *** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** 
******************  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  * 
                 *** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** *
*****************  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  
                *** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** **
****************  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *
               *** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** 
***************  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  * 
              *** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** *
**************  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  
             *** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** **
*************  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *
            *** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** 
************  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  * 
           *** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** *
***********  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  
          *** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** **
**********  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *
         *** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** 
*********  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  * 
        *** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** *
********  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  
       *** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** **
*******  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *
      *** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** 
******  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  * 
     *** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** *
*****  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  
    *** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** **
****  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *
   *** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** 
***  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  * 
  *** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** *
**  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  
 *** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** **
*  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *
*** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** 
  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  * 
** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** *
 *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  
* ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** **
*  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *
 ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** 
  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  * 
** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** *
 *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  
* ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** **
*  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *
 ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** 
  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  * 
** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** *
 *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  
* ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** **
*  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *
 ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** ** 
   end
   
   
   
   Enter Rule (0 - 255): 124
   start
                                       *                                       
                                       **                                      
                                       ***                                     
                                       * **                                    
                                       *****                                   
                                       *   **                                  
                                       **  ***                                 
                                       *** * **                                
                                       * *******                               
                                       ***     **                              
                                       * **    ***                             
                                       *****   * **                            
                                       *   **  *****                           
                                       **  *** *   **                          
                                       *** * ****  ***                         
                                       * *****  ** * **                        
                                       ***   ** ********                       
                                       * **  ****      **                      
                                       ***** *  **     ***                     
                                       *   **** ***    * **                    
                                       **  *  *** **   *****                   
                                       *** ** * *****  *   **                  
                                       * ********   ** **  ***                 
                                       ***      **  ****** * **                
                                       * **     *** *    *******               
                                       *****    * ****   *     **              
                                       *   **   ***  **  **    ***             
                                       **  ***  * ** *** ***   * **            
                                       *** * ** ****** *** **  *****           
                                       * ********    *** ***** *   **          
                                       ***      **   * ***   ****  ***         
                                       * **     ***  *** **  *  ** * **        
                                       *****    * ** * ***** ** ********       
                                       *   **   ********   ******      **      
                                       **  ***  *      **  *    **     ***     
                                       *** * ** **     *** **   ***    * **    
                                       * **********    * *****  * **   *****   
                                       ***        **   ***   ** *****  *   **  
                                       * **       ***  * **  ****   ** **  *** 
                                       *****      * ** ***** *  **  ****** * **
                                       *   **     ******   **** *** *    ******
                                       **  ***    *    **  *  *** ****   *     
                                       *** * **   **   *** ** * ***  **  **    
                                       * *******  ***  * ******** ** *** ***   
                                       ***     ** * ** ***      ****** *** **  
                                       * **    ********* **     *    *** ***** 
                                       *****   *       *****    **   * ***   **
                                       *   **  **      *   **   ***  *** **  * 
                                       **  *** ***     **  ***  * ** * ***** **
                                       *** * *** **    *** * ** ********   ****
                                       * ***** *****   * ********      **  *   
                                       ***   ***   **  ***      **     *** **  
                                       * **  * **  *** * **     ***    * ***** 
                                       ***** ***** * *******    * **   ***   **
                                       *   ***   *****     **   *****  * **  **
                                       **  * **  *   **    ***  *   ** ***** * 
                                       *** ***** **  ***   * ** **  ****   ****
                                       * ***   ***** * **  ******** *  **  *  *
                                       *** **  *   ******* *      **** *** ** *
                                       * ***** **  *     ****     *  *** ******
                                       ***   ***** **    *  **    ** * ***     
                                       * **  *   *****   ** ***   ****** **    
                                       ***** **  *   **  **** **  *    *****   
                                       *   ***** **  *** *  ***** **   *   **  
                                       **  *   ***** * **** *   *****  **  *** 
                                       *** **  *   *****  ****  *   ** *** * **
                                       * ***** **  *   ** *  ** **  **** ******
                                       ***   ***** **  ***** ****** *  ***     
                                       * **  *   ***** *   ***    **** * **    
                                       ***** **  *   ****  * **   *  *******   
                                       *   ***** **  *  ** *****  ** *     **  
                                       **  *   ***** ** ****   ** *****    *** 
                                       *** **  *   ******  **  ****   **   * **
                                       * ***** **  *    ** *** *  **  ***  ****
                                       ***   ***** **   **** **** *** * ** *   
                                       * **  *   *****  *  ***  *** *********  
                                       ***** **  *   ** ** * ** * ***       ** 
                                       *   ***** **  ************** **      ***
                                       **  *   ***** *            *****     * *
                                       *** **  *   ****           *   **    ***
                                       * ***** **  *  **          **  ***   *  
                                       ***   ***** ** ***         *** * **  ** 
                                       * **  *   ****** **        * ******* ***
                                       ***** **  *    *****       ***     *** *
                                       *   ***** **   *   **      * **    * ***
                                       **  *   *****  **  ***     *****   *** *
                                       *** **  *   ** *** * **    *   **  * ***
                                       * ***** **  **** *******   **  *** ***  
                                       ***   ***** *  ***     **  *** * *** ** 
                                       * **  *   **** * **    *** * ***** *****
                                       ***** **  *  *******   * *****   ***   *
                                       *   ***** ** *     **  ***   **  * **  *
                                       **  *   *******    *** * **  *** ***** *
                                       *** **  *     **   * ******* * ***   ***
                                       * ***** **    ***  ***     ***** **  *  
                                       ***   *****   * ** * **    *   ***** ** 
                                       * **  *   **  **********   **  *   *****
                                       ***** **  *** *        **  *** **  *   *
                                       *   ***** * ****       *** * ***** **  *
                                       **  *   *****  **      * *****   ***** *
   end



Enter Rule (0 - 255): 182
   start
                                       *                                       
                                      ***                                      
                                     * * *                                     
                                    *******                                    
                                   * ***** *                                   
                                  *** *** ***                                  
                                 * * * * * * *                                 
                                ***************                                
                               * ************* *                               
                              *** *********** ***                              
                             * * * ********* * * *                             
                            ******* ******* *******                            
                           * ***** * ***** * ***** *                           
                          *** *** *** *** *** *** ***                          
                         * * * * * * * * * * * * * * *                         
                        *******************************                        
                       * ***************************** *                       
                      *** *************************** ***                      
                     * * * ************************* * * *                     
                    ******* *********************** *******                    
                   * ***** * ********************* * ***** *                   
                  *** *** *** ******************* *** *** ***                  
                 * * * * * * * ***************** * * * * * * *                 
                *************** *************** ***************                
               * ************* * ************* * ************* *               
              *** *********** *** *********** *** *********** ***              
             * * * ********* * * * ********* * * * ********* * * *             
            ******* ******* ******* ******* ******* ******* *******            
           * ***** * ***** * ***** * ***** * ***** * ***** * ***** *           
          *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***          
         * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *         
        ***************************************************************        
       * ************************************************************* *       
      *** *********************************************************** ***      
     * * * ********************************************************* * * *     
    ******* ******************************************************* *******    
   * ***** * ***************************************************** * ***** *   
  *** *** *** *************************************************** *** *** ***  
 * * * * * * * ************************************************* * * * * * * * 
*************** *********************************************** ***************
 ************* * ********************************************* * ************* 
* *********** *** ******************************************* *** *********** *
 * ********* * * * ***************************************** * * * ********* * 
*** ******* ******* *************************************** ******* ******* ***
** * ***** * ***** * ************************************* * ***** * ***** * **
* *** *** *** *** *** *********************************** *** *** *** *** *** *
 * * * * * * * * * * * ********************************* * * * * * * * * * * * 
*********************** ******************************* ***********************
********************** * ***************************** * **********************
********************* *** *************************** *** *********************
******************** * * * ************************* * * * ********************
******************* ******* *********************** ******* *******************
****************** * ***** * ********************* * ***** * ******************
***************** *** *** *** ******************* *** *** *** *****************
**************** * * * * * * * ***************** * * * * * * * ****************
*************** *************** *************** *************** ***************
 ************* * ************* * ************* * ************* * ************* 
* *********** *** *********** *** *********** *** *********** *** *********** *
 * ********* * * * ********* * * * ********* * * * ********* * * * ********* * 
*** ******* ******* ******* ******* ******* ******* ******* ******* ******* ***
** * ***** * ***** * ***** * ***** * ***** * ***** * ***** * ***** * ***** * **
* *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *
 * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * 
*******************************************************************************
*******************************************************************************
*******************************************************************************
*******************************************************************************
*******************************************************************************
*******************************************************************************
*******************************************************************************
*******************************************************************************
*******************************************************************************
*******************************************************************************
*******************************************************************************
*******************************************************************************
*******************************************************************************
*******************************************************************************
*******************************************************************************
*******************************************************************************
*******************************************************************************
*******************************************************************************
*******************************************************************************
*******************************************************************************
*******************************************************************************
*******************************************************************************
*******************************************************************************
*******************************************************************************
*******************************************************************************
 ***************************************************************************** 
* *************************************************************************** *
 * ************************************************************************* * 
*** *********************************************************************** ***
** * ********************************************************************* * **
* *** ******************************************************************* *** *
 * * * ***************************************************************** * * * 
******* *************************************************************** *******
****** * ************************************************************* * ******
***** *** *********************************************************** *** *****
**** * * * ********************************************************* * * * ****
*** ******* ******************************************************* ******* ***
   end

********************END SAMPLE RUN************/


//solution
// CS 1B
// Assignment #3, Instructor Solution

import java.util.Scanner;

public class Foothill
{
   public static void main(String[] args)
   {
      int rule, k;
      String strUserIn;
      
      Scanner inputStream = new Scanner(System.in);
      Automaton aut;

      // get rule from user
      do
      {
         System.out.print("Enter Rule (0 - 255): ");
         // get the answer in the form of a string:
         strUserIn = inputStream.nextLine();
         // and convert it to a number so we can compute:
         rule = Integer.parseInt(strUserIn);

      } while (rule < 0 || rule > 255);

      // create automaton with this rule and single central dot
      aut = new Automaton(rule);

      // now show it
      System.out.println("   start");
      for (k = 0; k < 100; k++)
      {
         System.out.println( aut.toStringCurrentGen() );
         aut.propagateNewGeneration();
      }
      System.out.println("   end");
      inputStream.close();
   }
}

class Automaton
{
   // class constants
   public final static int MAX_DISPLAY_WIDTH = 121;
   
   // private members
   private boolean rules[];  // allocate rules[8] in constructor!
   private String thisGen;   // same here
   private String extremeBit; // bit, "*" or " ", implied everywhere "outside"
   private int displayWidth;  // an odd number so it can be perfectly centered
   
   // constructor
   public Automaton(int new_rule)
   {
      rules = new boolean[8];
      if ( !setRule(new_rule) )
         setRule(0);
      resetFirstGen();
      setDisplayWidth(79);
   }
 
   public void resetFirstGen()
   {
      // create a virtual 1 in a sea of 0s:   "         *         "
      thisGen = "*";
      extremeBit = " ";
   }
   
   // mutators
   public boolean setRule(int new_rule)
   {
      int bit_to_examine, k, bit_result;

      // optional filtering
      if (new_rule < 0 || new_rule > 255)
         return false;
      
      // nothing to filter
      for (k = 0; k < 8; k++)
      {
         bit_to_examine = 1 << k;
         bit_result = bit_to_examine & new_rule;
         if ( bit_result != 0 )
            rules[k] = true;
         else
            rules[k] = false;
      }
      return true;
   }
   
   public boolean setDisplayWidth(int width)
   {
      // check range
      if (width < 1 || width > MAX_DISPLAY_WIDTH)
         return false;

      // require odd parity
      if (width % 2 == 0)
         return false;

      displayWidth = width;
      return true;
   }

   public String toStringCurrentGen()
   {
      int padAmount;  // amount that we have to add to thisGen to give it full length
      // of displayLength
      int k, amountToTruncEachSide;
      String displayString = "";

      padAmount = displayWidth - thisGen.length();

      if (padAmount >= 0)
      {
         // we need to add padAmount/2 of extremeBit on each side of thisGen
         // to satisfy display string
         for (k = 0; k < padAmount/2; k++)
            displayString += extremeBit;
         displayString += thisGen;
         for (k = 0; k < padAmount/2; k++)
            displayString += extremeBit;
      }
      else
      {
         // truncate thisGen on both ends by padAmount/2 to fit display string
         amountToTruncEachSide = -(padAmount/2);  // or absolute value pad/2

         for (k = 0; k < displayWidth; k++)
            displayString += thisGen.charAt(amountToTruncEachSide + k);
      }

      return displayString;
   }
   
   public void propagateNewGeneration()
   {
      int tripletVal;
      String nextGen = "";
      boolean extremeBitIsOne;
   
      // prepare by padding left and right with two extreme bits each
      thisGen = extremeBit + extremeBit + thisGen + extremeBit + extremeBit ;

      // we have added 4 chars to the existing generation.  Now apply rule,
      // which will shorten by 1 char on each side, with a net increase of
      // 2 chars.

      // all the positions of nextGen[k] are determined by
      // thisGen[k-1], thisGen[k] and thisGen[k+1]
      // according to the rule set
      
      // according to the rule set
      for (int k = 1; k < thisGen.length()-1; k++)
      {
         // turn the three positions into an int, e.g., "** " -> 6
         tripletVal = 0;
         if (thisGen.charAt(k-1) == '*')
            tripletVal+=4;
         if (thisGen.charAt(k) == '*')
            tripletVal+=2;
         if (thisGen.charAt(k+1) == '*')
            tripletVal+=1;
   
         // now use the rule set to get the "child" of these three
         nextGen += rules[tripletVal] ? "*" : " ";
      }

      // extremeBit must be recomputed.  
      // first the boolean that answers the question
      if (extremeBit == " ")
         extremeBitIsOne = rules[0];
      else
         extremeBitIsOne = rules[7];

      // and convert the boolean to the new character, blank or *:
      extremeBit = extremeBitIsOne ? "*" : " ";

      // and finally pass the torch to the new generation
      thisGen = nextGen;
   }
}
 
